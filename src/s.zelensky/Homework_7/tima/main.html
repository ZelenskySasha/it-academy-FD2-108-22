<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">

</head>
<style>
    #conteiner {
        position: absolute;
        left: 10%;
        top: 10%;
        width: 80%;
    }
    
    .div {
        position: relative;
        width: 200px;
        height: 200px;
        float: left;
        background-color: beige;
        margin: 15px;
        text-align: center;
        font-size: 30px;
    }
    
    img {
        width: 100%;
        height: 100%;
        position: relative;
    }
</style>


<body onload="Create(7);">
    <div id='conteiner'>

    </div>
    <script>
        const img = 'https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Старый_дом%2C_Сестрорецкий_Курорт_-_Old_house_in_Siestarjoki_-_panoramio.jpg/1280px-Старый_дом%2C_Сестрорецкий_Курорт_-_Old_house_in_Siestarjoki_-_panoramio.jpg';
        const amount = 6;
        const gif = 'https://i.gifer.com/origin/b4/b4d657e7ef262b88eb5f7ac021edda87.gif';
        //filter: grayscale(100%);
        let total = 0;
        url = 'http://localhost:3000';

        function Create() {
            if (document.getElementById('conteiner').lastChild) {
                document.getElementById('conteiner').lastChild.remove();
            }
            for (let i = 0; i < amount; i++) {
                total++;
                const div = document.createElement('div');
                div.classList = 'div';
                document.getElementById('conteiner').append(div);
                const pic = document.createElement('img');

                pic.setAttribute('src', img)
                pic.style.filter = "grayscale(" + total + "%)";
                div.append(pic);
            }
            const newload = document.createElement('div');
            newload.classList = 'div';
            newload.textContent = "Load more";
            newload.style.paddingTop = '80px';
            newload.style.height = '120px';
            newload.addEventListener('click', (event) => {
                const pic = document.createElement('img');

                pic.setAttribute('src', gif);
                event.target.style.height = '200px';
                event.target.style.paddingTop = '0px';
                event.target.textContent = '';
                event.target.append(pic);


                setTimeout(Create, 2000);
            })

            document.getElementById('conteiner').append(newload);
            servetLoad
        }

        function servetLoad() {
            fetch('products.json').then(function(response) {
                if (response.ok) {
                    response.json().then(function(json) {
                        products = json;
                        initialize();
                    });
                } else {
                    console.log('Network request for products.json failed with response ' + response.status + ': ' + response.statusText);
                }
            });
        }
    </script>
</body>

</html>